---
title: 监听dom变化
date: 2019-09-28 21:31:10
categories: "js"
tags: ["js"]
---

那是一个风雨交加的夜晚。哦,不！下午,有没有风雨交加早已经不记得了。
当我看到交互设计的时候，心里一咯噔:‘wc, 我们这单页项目用的vue hash路由,再想用锚点实现这种页面内跳转已经是不行了’。 年少的我还没来得及反应,只听产品问（说）道‘这个交互可以实现的哈’,我嗯了一句。
现在回忆到这,才知道我那一声‘嗯’深藏功与名（夸张了,夸张了,只怪自己还是个弟弟）。

这个是页面的大概模样,类似tab页,不同的是下面是滚动的,每一块高度不固定。并且操作的响应是双向的：点击按钮时要滚动到对应的页,鼠标滚轮在下面滚动的时候tab按钮也要高亮当前可见块对应的按钮。
<center>

![dom_change.png](https://ws1.sinaimg.cn/large/781ff8c9gy1g7g4d5tdqkj20zx0kg77t.jpg)

</center>

<center>

![dom变化.png](https://ws1.sinaimg.cn/large/781ff8c9gy1g7hx9fbu38j20ca0hljrt.jpg)

注意这里每一块的高度是不一致的
</center>

看到这里是不是觉得和手机通讯录的联系人列表很相似尼。是的,通讯录右侧字母可以导航到指定首字母位置,滑动列表时字母列表也要高亮当前所在位置的字母。

也许想到这里会蹦出一个想法‘这还不简单,安装个库就搞定了-- better-scroll’; 不假,better-scroll 确实可以做,并且我已经先用better-scroll 实现过了,只不过 better-scroll 对鼠标事件并不友好,偶尔出现字体模糊情况。况且为了这安装一个依赖感觉有些像为了某个一方法把整个lodash库引入一样傻。